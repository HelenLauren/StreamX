<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin-AdicionarFilmes</title>
    <link rel="stylesheet" href="styles.css/add.filmes.css">
</head>
<body>
    <div class="admin-container">
        <aside class="sidebar">
            <h2>StreamX</h2>
            <nav>
                <ul>
                    <li><a href="#">Dashboard</a></li>
                    <li><a href="#">Clientes</a></li>
                    <li><a href="add.filmes.html">Filmes</a></li>
                    <li><a href="#">Atividades</a></li>
                    <li><a href="#">Aluguéis</a></li>
                    <li><a href="#">Eventos</a></li>
                    <li><a href="#">Financeiro</a></li>
                    <li><a href="#">Relatórios</a></li>
                </ul>
            </nav>
        </aside>
         <section class="main-content">
            <header>
                <h1>Filmes</h1>
                <button class="add-movie-btn" onclick="openPopup()">Adicionar Filme</button>
            </header>

            <div class="movie-list">
                <div class="movie-item">
                    <h3>As Branquelas - 2004</h3>
                    <p>Descrição do filme</p>
                    <p><strong>Link:</strong> <a href="#"></a></p>
                </div>
                <div class="movie-item">
                    <h3>De Volta Para o Futuro</h3>
                    <p>Descrição do filme</p>
                    <p><strong>Link:</strong> <a href="#"></a></p>
                </div>
                <!-- adicionar outros filmes depois-->
            </div>
        </section>
        <script>

            const salvar = async () => {
                console.log('salvar');

                var movieName = document.getElementById('movie-name').value;
                var rentalPrice = document.getElementById('rental-price').value;
                var premierYear = document.getElementById('premier-year');
                var genre = document.getElementById('genre').value;
                var genre2 = document.getElementById('genre2').value;
                var ageClassification = document.getElementById('age-classification').value;

                console.log(movieName);
                console.log(rentalPrice);
                console.log(premierYear);
                console.log(genre);
                console.log(genre2);
                console.log(ageClassification);
                var data = {
                    movieName: movieName,
                    rentalPrice: rentalPrice,
                    premierYear: premierYear,
                    genre: genre,
                    genre2: genre2,
                    ageClassification: ageClassification
                }

                console.log(JSON.stringify(data));
                const response = await fetch(`http://localhost:3000/api/filmes`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(data),
                });
                const result = await response.json();
                console.log(result);
            }
        </script>

        <div class="popup" id="addMoviePopup">
            <div class="popup-content">
                <span class="close-btn" onclick="closePopup()">×</span>
                <h2>Adicionar novo filme</h2>
                <form>
                    <label for="movie-name">Nome do filme</label>
                    <input type="text" id="movie-name" placeholder="Nome do filme">

                    <label for="rental-price">Preço Aluguel</label>
                    <input type="text" id="rental-price" placeholder="Preço">

                    <label for="premier-year">Ano Lançamento</label>
                    <input type="text" id="premier-year" placeholder="Ano Lancamento">

                    <label for="genre">Gênero 1</label>
                    <select id="genre" placeholder="Gênero">
                        <option value="">Selecione um Genero</option>
                        <option value="Acao">Acao</option>
                        <option value="Aventura"> Aventura</option>
                        <option value="Comedia"> Comédia</option>
                        <option value="Drama"> Drama</option>
                        <option value="Fantasia"> Fantasia</option>
                        <option value="Ficcao Cientifica"> Ficcao Cientifica</option>
                    </select>
                    <label for="genre2">Gênero 2</label>
                    <select id="genre2" placeholder="Gênero">
                        <option value="">Selecione um Genero</option>
                        <option value="Acao">Acao</option>
                        <option value="Aventura"> Aventura</option>
                        <option value="Comedia"> Comédia</option>
                        <option value="Drama"> Drama</option>
                        <option value="Fantasia"> Fantasia</option>
                        <option value="Ficcao Cientifica"> Ficcao Cientifica</option>
                    </select>
                    <label for="age-classification">Classificação Indicativa</label>
                    <select id="age-classification">
                        <option value="">Selecione uma classificação</option>
                        <option value="L">Livre</option>
                        <option value="10"> 10 anos</option>
                        <option value="12"> 12 anos</option>
                        <option value="14"> 14 anos</option>
                        <option value="16"> 16 anos</option>
                        <option value="18"> 18 anos</option>
                    </select>

                    <label for="cover-image">Escolher arquivo</label>
                    <input type="file" id="cover-image">

                    <button onclick="salvar()" type="button">Adicionar</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        function openPopup() {
            document.getElementById('addMoviePopup').style.display = 'block';
        }

        function closePopup() {
            document.getElementById('addMoviePopup').style.display = 'none';
        }
    </script>
</body>
</html>

